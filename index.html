<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Default meta (will be dynamically updated per page by SEOHead component) -->
    <title>Stoneworks of Colorado | Custom Stone & Granite Countertops</title>
    <meta name="description" content="Northern Colorado's premier custom stone fabricator. 20+ years crafting granite, quartz, marble & quartzite countertops. Free consultation. 1 year warranty." />
    <meta name="author" content="Stoneworks of Colorado" />
    <meta name="keywords" content="granite countertops, quartz countertops, marble countertops, custom stone, Fort Collins, Northern Colorado, kitchen remodel, bathroom vanity" />
    <link rel="canonical" href="https://stoneworksco.com" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph defaults -->
    <meta property="og:title" content="Stoneworks of Colorado | Custom Stone Countertops" />
    <meta property="og:description" content="Transform your kitchen & bath with custom stone countertops. 20+ years of expert craftsmanship in Northern Colorado." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://stoneworksco.com" />
    <meta property="og:image" content="https://stoneworksco.com/og-image.jpg" />
    <meta property="og:site_name" content="Stoneworks of Colorado" />

    <!-- Twitter Card defaults -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@StoneworksCO" />
    <meta name="twitter:title" content="Stoneworks of Colorado | Custom Stone Countertops" />
    <meta name="twitter:description" content="Transform your kitchen & bath with custom stone countertops. 20+ years of expert craftsmanship in Northern Colorado." />
    <meta name="twitter:image" content="https://stoneworksco.com/og-image.jpg" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    
    <!-- Critical Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="dns-prefetch" href="https://beta.leadconnectorhq.com" />
    
    <!-- Critical CSS - Inlined for faster FCP/LCP -->
    <style>
      /* Critical above-the-fold styles */
      *,*::before,*::after{box-sizing:border-box}
      html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,-apple-system,sans-serif}
      body{margin:0;background-color:hsl(40 20% 97%);color:hsl(30 10% 15%)}
      #root{min-height:100vh}
      .animate-fade-in{animation:fadeIn .5s ease-out forwards;opacity:0}
      @keyframes fadeIn{to{opacity:1}}
      /* Hero section critical styles - provides instant visual before React loads */
      section.relative{position:relative}
      .min-h-screen{min-height:100vh}
      .flex{display:flex}
      .items-center{align-items:center}
      .justify-center{justify-content:center}
      .overflow-hidden{overflow:hidden}
      .absolute{position:absolute}
      .inset-0{top:0;right:0;bottom:0;left:0}
      .w-full{width:100%}
      .h-full{height:100%}
      .object-cover{object-fit:cover}
      .z-10{z-index:10}
      .container{width:100%;margin-left:auto;margin-right:auto;padding-left:1.5rem;padding-right:1.5rem}
      @media(min-width:1024px){.container{max-width:1280px}}
      /* Hero placeholder gradient - shows immediately before image loads */
      .hero-placeholder{background-color:hsl(30,10%,18%);background-image:linear-gradient(to bottom,hsl(30,10%,15%) 0%,hsl(30,10%,20%) 50%,hsl(30,10%,12%) 100%)}
    </style>
    
    <!-- Hero Image Preload - Critical for LCP -->
    <!-- Using fetchpriority="high" to ensure browser prioritizes LCP image -->
    <link 
      rel="preload" 
      as="image" 
      href="/images/hero-mobile.webp"
      media="(max-width: 640px)"
      type="image/webp"
      fetchpriority="high"
    />
    <link 
      rel="preload" 
      as="image" 
      href="/images/hero-tablet.webp"
      media="(min-width: 641px) and (max-width: 1024px)"
      type="image/webp"
      fetchpriority="high"
    />
    <link 
      rel="preload" 
      as="image" 
      href="/images/hero-desktop.webp"
      media="(min-width: 1025px)"
      type="image/webp"
      fetchpriority="high"
    />
    
    <!-- Font loading optimized for performance (non-blocking) -->
    <link 
      rel="preload" 
      as="style" 
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap"
    />
    <link 
      rel="stylesheet" 
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap"
      media="print" 
      onload="this.media='all'"
    />
    <noscript>
      <link 
        rel="stylesheet" 
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap"
      />
    </noscript>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- GHL Chat Widget - Heavily deferred for performance -->
    <script>
      (function() {
        var loaded = false;
        
        function loadChatWidget() {
          if (loaded) return;
          loaded = true;
          
          var script = document.createElement('script');
          script.src = 'https://beta.leadconnectorhq.com/loader.js';
          script.setAttribute('data-resources-url', 'https://beta.leadconnectorhq.com/chat-widget/loader.js');
          script.setAttribute('data-widget-id', '68d6b1e32c7d0b6e6655dd6c');
          script.async = true;
          document.body.appendChild(script);
        }
        
        // Mobile: Load after significant scroll or 15 seconds (increased from 10)
        if (window.innerWidth <= 768) {
          var scrollHandler = function() {
            if (window.scrollY > window.innerHeight * 0.75) {
              loadChatWidget();
              window.removeEventListener('scroll', scrollHandler);
            }
          };
          window.addEventListener('scroll', scrollHandler, { passive: true });
          setTimeout(loadChatWidget, 15000);
        } else {
          // Desktop: Load after 5 seconds (increased from 3)
          if (document.readyState === 'complete') {
            setTimeout(loadChatWidget, 5000);
          } else {
            window.addEventListener('load', function() {
              setTimeout(loadChatWidget, 5000);
            }, { once: true });
          }
        }
      })();
    </script>
    
    <!-- Hide GHL chat bubble on mobile, keep icon only -->
    <style>
      /* On mobile, clip the widget container to only show the bottom-right icon area */
      @media (max-width: 768px) {
        /* Target the GHL widget container - usually has fixed positioning */
        #chat-widget,
        #lc-chat-widget,
        .lc-chat-widget,
        div[id*="chat-widget"],
        div[class*="chat-widget"] {
          /* Clip to show only bottom 70px (the icon) */
          clip-path: inset(calc(100% - 70px) 0 0 calc(100% - 70px)) !important;
        }
        
        /* Alternative: target iframe container */
        iframe[src*="leadconnector"],
        iframe[src*="chat-widget"] {
          clip-path: inset(calc(100% - 70px) 0 0 calc(100% - 70px)) !important;
        }
      }
    </style>
    <script>
      // Hide GHL bubble on mobile by clipping the widget
      (function() {
        if (window.innerWidth > 768) return;
        
        function clipWidget() {
          // Find iframe or container elements from GHL
          var selectors = [
            'iframe[src*="leadconnector"]',
            'iframe[src*="chat-widget"]',
            'iframe[src*="msgsndr"]',
            '#chat-widget',
            '#lc-chat-widget',
            '[id*="chat-widget"]',
            '[class*="chat-widget"]'
          ];
          
          selectors.forEach(function(sel) {
            document.querySelectorAll(sel).forEach(function(el) {
              el.style.clipPath = 'inset(calc(100% - 80px) 0 0 calc(100% - 80px))';
            });
          });
          
          // Also find fixed position containers with iframes
          document.querySelectorAll('div[style*="position: fixed"]').forEach(function(el) {
            if (el.querySelector('iframe') || el.textContent.includes('Message us')) {
              // Check if this is bottom-right positioned (likely the chat widget)
              var rect = el.getBoundingClientRect();
              if (rect.right > window.innerWidth - 100 && rect.bottom > window.innerHeight - 200) {
                el.style.clipPath = 'inset(calc(100% - 80px) 0 0 calc(100% - 80px))';
              }
            }
          });
        }
        
        // Run multiple times as widget loads async
        setTimeout(clipWidget, 2000);
        setTimeout(clipWidget, 5000);
        setTimeout(clipWidget, 10000);
        setTimeout(clipWidget, 15000);
        
        // Also observe for DOM changes
        var observer = new MutationObserver(clipWidget);
        observer.observe(document.documentElement, { childList: true, subtree: true });
      })();
    </script>
  </body>
</html>
